function toggleSaveLoadButton(){if($("#save-load-buttons").css("display")=="block"){$("#save-load-buttons").slideUp("fast");$("#save-load-message").hide()}else{$("#save-load-buttons").slideDown("fast");$("#save-load-message").show()}}function saveEntryData(g){if(!window.localStorage){return false}if(!confirm("現在の入力内容を保存します。\nよろしいですか？")){return false}var a=$("input:text, input[type=email], textarea, select");var d=new Array;d[0]=new Date().getTime();var c=1;var e="";a.each(function(){if($(this).val()!=""){e=$(this).val();e=e.replace(/_\[\=\]_/i,"_[＝]_");e=e.replace(/_\[\,\]_/i,"_[，]_");d[c++]=$(this).attr("id")+"_[=]_"+e}});var a=$("input:checked");a.each(function(){d[c++]=$(this).attr("id")+"_[=]_@checked"});localStorage.setItem(g,d.join("_[,]_"));var b=new Date();var f=b.getFullYear()+"/"+("0"+(b.getMonth()+1)).slice(-2)+"/"+("0"+b.getDate()).slice(-2)+" "+("0"+b.getHours()).slice(-2)+":"+("0"+b.getMinutes()).slice(-2);$("#save-load-date").html(f);$("#save-load-message").show();$("#save-load-message").html('<span style="color: blue">保存しました</span>');setTimeout("$('#save-load-buttons').slideUp(1000)",2500);setTimeout("$('#save-load-message').slideUp(1000)",2500);setTimeout("$('#save-load-message').html('')",3000);return true}function loadEntryData(d){if(!window.localStorage){return false}if($("#save-load-date").text()=="未保存"){alert("保存されているデータはありません");return false}if(!confirm("保存されているデータを読込みます。\nよろしいですか？")){return false}var c=localStorage.getItem(d);if(c==null){return false}var b=new Array;b=c.split("_[,]_");var a;for(a=1;a<b.length;a++){kv=b[a].split("_[=]_");elemId=kv[0];elemVal=kv[1];if(elemVal=="@checked"){$("#"+elemId).attr("checked","checked")}else{$("#"+elemId).val(elemVal)}}if($("#shoppingform-table").length){goodsListSize=$("input[name=goodsListSize]").val();for(a=0;a<goodsListSize;a++){$("#goodsAmount_"+a).trigger("blur")}}$("#save-load-message").show();$("#save-load-message").html('<span style="color: blue;">読込みました</span>');setTimeout("$('#save-load-buttons').slideUp(1000)",2500);setTimeout("$('#save-load-message').slideUp(1000)",2500);setTimeout("$('#save-load-message').html('')",3000);return true}function removeEntryData(a){if(!window.localStorage){return false}if($("#save-load-date").text()=="未保存"){alert("保存されているデータはありません");return false}if(!confirm("保存されているデータを削除します。\nよろしいですか？")){return false}localStorage.removeItem(a);$("#save-load-message").show();$("#save-load-message").html('<span style="color: blue;">削除しました</span>');setTimeout("$('#save-load-buttons').slideUp(1000)",2500);setTimeout("$('#save-load-message').slideUp(1000)",2500);setTimeout("$('#save-load-message').html('')",3000);$("#save-load-date").html("未保存");return true}$(function(){if(window.localStorage){var f=$("#formId").val();var d=localStorage.getItem(f);if(d!=null){var a=new Array;a=d.split("_[,]_");var c=new Date();c.setTime(a[0]);var e=c.getFullYear()+"/"+("0"+(c.getMonth()+1)).slice(-2)+"/"+("0"+c.getDate()).slice(-2)+" "+("0"+c.getHours()).slice(-2)+":"+("0"+c.getMinutes()).slice(-2);if($("#error-message").length==0){if($("#partingNum").val()>0){}else{$("#save-load-message").html("保存データがあります");setTimeout("$('#save-load-message').fadeOut(1000)",6000)}}$("#save-load-date").html(e)}else{$("#save-load-date").html("未保存")}}else{$("#save-load-layer").css("position","absolute");$("#save-load-message").hide();$("#save-load-buttons").html('<p style="color: red; background-color: #fff;">このブラウザでは保存機能は動作しません。</p>');setTimeout("$('#save-load-layer').fadeOut(1000)",8000)}if(location.href.match(/\/fgen\//)){var b=navigator.userAgent;if(b.match(/iPhone/)=="iPhone"||b.match(/iPod/)=="iPod"||b.match(/Android/)=="Android"){$("#save-load-layer").css("position","absolute")}}if(location.href.match(/\/sfgen\//)){$("body").css("padding-top","44px")}});